{"is_source_file": true, "format": "TypeScript", "description": "This file contains utility functions for making API POST requests and simulating streaming responses within a React frontend. It includes a method for posting JSON data to an API endpoint, with mock fallback behavior, and a function to simulate streaming tokens with incremental callbacks.", "external_files": ["process.env.REACT_APP_API_BASE", "process.env.REACT_APP_BACKEND_URL"], "external_methods": ["fetch"], "published": ["postJson", "mockStream"], "classes": [], "methods": [{"name": "export async function postJson<T = any>(path: string, body: unknown, opts?: { signal?: AbortSign/ postJson", "description": "Performs a POST request to an API endpoint with JSON payload, returning a typed response; falls back to mocked response if API not configured.", "scope": "", "scopeKind": ""}, {"name": "export function mockStream(content: string, cb: (chunk: string) => void, done: () => void, delay/ mockStream", "description": "Simulates streaming tokens from a string, invoking callbacks with chunks at intervals, useful for mimicking real-time token streaming in frontend.", "scope": "", "scopeKind": ""}], "calls": ["setTimeout", "setInterval", "clearInterval", "Date.now", "Date.prototype.toISOString", "fetch"], "search-terms": ["postJson", "mockStream", "API_BASE", "React", "fetch"], "state": 2, "file_id": 15, "knowledge_revision": 30, "git_revision": "", "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/real-time-ai-chat-platform-224064-224085/frontend_react/src/api/client.ts", "pattern": "/^const API_BASE = process.env.REACT_APP_API_BASE || process.env.REACT_APP_BACKEND_URL;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/real-time-ai-chat-platform-224064-224085/frontend_react/src/api/client.ts", "pattern": "/^    const content = typeof body === 'object' && body && 'messages' in (body as any)$/", "language": "TypeScript", "kind": "constant", "scope": "postJson", "scopeKind": "function"}, {"_type": "tag", "name": "mockStream", "path": "/home/kavia/workspace/code-generation/real-time-ai-chat-platform-224064-224085/frontend_react/src/api/client.ts", "pattern": "/^export function mockStream(content: string, cb: (chunk: string) => void, done: () => void, delay/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "postJson", "path": "/home/kavia/workspace/code-generation/real-time-ai-chat-platform-224064-224085/frontend_react/src/api/client.ts", "pattern": "/^export async function postJson<T = any>(path: string, body: unknown, opts?: { signal?: AbortSign/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/real-time-ai-chat-platform-224064-224085/frontend_react/src/api/client.ts", "pattern": "/^  const res = await fetch(`${API_BASE}${path}`, {$/", "language": "TypeScript", "kind": "constant", "scope": "postJson", "scopeKind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/real-time-ai-chat-platform-224064-224085/frontend_react/src/api/client.ts", "pattern": "/^    const text = await res.text().catch(() => '');$/", "language": "TypeScript", "kind": "constant", "scope": "postJson", "scopeKind": "function"}, {"_type": "tag", "name": "timer", "path": "/home/kavia/workspace/code-generation/real-time-ai-chat-platform-224064-224085/frontend_react/src/api/client.ts", "pattern": "/^  const timer = setInterval(() => {$/", "language": "TypeScript", "kind": "constant", "scope": "mockStream", "scopeKind": "function"}, {"_type": "tag", "name": "tokens", "path": "/home/kavia/workspace/code-generation/real-time-ai-chat-platform-224064-224085/frontend_react/src/api/client.ts", "pattern": "/^  const tokens = content.split(\\/(\\\\s+)\\/); \\/\\/ keep spaces$/", "language": "TypeScript", "kind": "constant", "scope": "mockStream", "scopeKind": "function"}, {"_type": "tag", "name": "useMock", "path": "/home/kavia/workspace/code-generation/real-time-ai-chat-platform-224064-224085/frontend_react/src/api/client.ts", "pattern": "/^  const useMock = opts?.mock || !API_BASE;$/", "language": "TypeScript", "kind": "constant", "scope": "postJson", "scopeKind": "function"}], "hash": "131b85cf561ff1dadbb01330ebcefdc0", "format-version": 4, "code-base-name": "frontend_react", "filename": "frontend_react/src/api/client.ts", "revision_history": [{"30": ""}]}